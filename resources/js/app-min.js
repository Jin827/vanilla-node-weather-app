!function(){const e=document.querySelector("#app"),t=e.querySelector(".city-form"),n=t.querySelector(".city-input"),r=e.querySelector(".contents-header"),o=e.querySelector(".current-summary"),a=e.querySelector(".current-right"),i=e.querySelector(".current-left"),c=e.querySelector(".daily-list"),s=[["clear-day","day-sunny"],["clear-night","night-clear"],["rain","rain"],["snow","snow"],["sleet","sleet"],["wind","windy"],["fog","fog"],["cloudy","cloudy"],["partly-cloudy-day","day-cloudy"],["partly-cloudy-night","night-partly-cloudy"],["hail","hail"],["thunderstorm","thunderstorm"],["tornado","tornado"]];function u(e){e.daily.map(e=>({time:e.time,icon:e.icon,tempMax:e.apparentTemperatureMax,tempMin:e.apparentTemperatureMin})).forEach(e=>{!function(e){const t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saterday","Sunday"][new Date(1e3*e).getDay()],n=document.createElement("li");n.appendChild(document.createTextNode(t)),c.appendChild(n)}(e.time),function(e){const t=document.createElement("li");t.innerHTML="<i></i>",t.setAttribute("class","d-icon"),c.appendChild(t),s.forEach(n=>{if(e===n[0])return t.setAttribute("class",`wi wi-${n[1]}`)})}(e.icon),[[c,"li",e.tempMax,"max-temp"],[c,"li",e.tempMin,"min-temp"]].forEach(e=>{const t=document.createElement(e[1]);t.appendChild(document.createTextNode(e[2])),t.setAttribute("class",e[3]),e[0].appendChild(t)})})}function l(e){return new Promise(function(t,n){const r=new XMLHttpRequest;r.open("POST",e.url,!0),r.onload=function(){this.status>=200&&this.status<300?t(r.response):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.setRequestHeader("Content-type","application/json"),r.send(e.data)})}function d(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,function(e){alert("Oops! There is a problem with Geolocation API connection. Please use the website search engine."),console.warn(`ERROR(${e.code}): ${e.message}`)},{maximumAge:0})})}function m(e){const t=[n,r,o,a,i,c],l=JSON.parse(e);t.forEach(e=>e.innerHTML="");const d=[function(e){const t=document.createElement("li");t.innerHTML="<i></i>",t.setAttribute("class","c-icon"),o.appendChild(t),s.forEach(n=>{if(e===n[0])return t.setAttribute("class",`wi wi-${n[1]}`)})}(l.weather.icon),function(e){const{apparentTemperature:t,pressure:n,humidity:c,summary:s,temperature:u,uvIndex:l,windSpeed:d,visibility:m}=e.weather,p=[[r,"H3",e.cityName," "],[r,"p",s," "],[o,"p",u+" °C","w-temperature"]],y=[[i,"FEELS LIKE",t," °"],[i,"HUMIDITY",c," %"],[i,"WIND",d," Km/h"],[a,"UV INDEX",l," of 10"],[a,"PRESSURE",n," hPa"],[a,"VISIBILITY",m," Km"]];p.forEach(e=>{const t=document.createElement(e[1]);t.appendChild(document.createTextNode(e[2])),t.setAttribute("class",e[3]),e[0].appendChild(t)}),y.forEach(e=>{const t=document.createElement("li");t.innerHTML=`<span class="current-span">${e[1]}</span> <br>`+`${e[2]}`+`${e[3]}`,e[0].appendChild(t)}),document.getElementById("current-list").style.borderTop="1px solid #333",document.getElementById("current-list").style.borderBottom="1px solid #333"}(l),u(l),function(e){const{temperature:t}=e.weather,n=document.getElementById("section-weather");return t>20?n.style.backgroundImage="url('resources/img/clear-sky-min.jpeg')":t>0?n.style.backgroundImage="url('resources/img/cloud-min.jpeg')":t<=0?n.style.backgroundImage="url('resources/img/snow-min.jpeg')":void 0}(l)];Promise.all(d)}confirm("Allow this website to know your location ?")&&d().then(e=>({data:JSON.stringify({lat:e.coords.latitude,lng:e.coords.longitude}),url:"/"})).then(l).then(m).catch(e=>console.log("Something went wrong!")),t.addEventListener("submit",function(e){e.preventDefault();const t=n.value,r=JSON.stringify({city:t});t?l({data:r,url:"/search/"}).then(m).catch(e=>console.log("Something went wrong!")):alert("Please enter a city name"),n.value=""})}();